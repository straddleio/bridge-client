!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("@straddleio/bridge-core")):"function"==typeof define&&define.amd?define(["@straddleio/bridge-core"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).BridgeCore)}(this,(function(e){"use strict";const o={getUrl:()=>`${o.origin}/${encodeURIComponent(window.location.origin)}/`,origin:"",mounted:!1,verbose:!1,init:function(d){const{appUrl:n,token:t,onSuccess:i,onSuccessCTAClicked:s,onBridgeToken:l,style:r,verbose:a=!1}=d;o.origin=null!=n?n:"https://dev.straddle.io",a&&console.log("init called");const g=document.createElement("iframe");g.setAttribute("src",o.getUrl()),g.id="Straddle-widget-iframe",Object.assign(g.style,r),document.getElementsByTagName("body")[0].appendChild(g),window.addEventListener("message",(function(d){var n;if(d.origin===o.origin)switch(a&&console.log("Message received from widget:",d.data.type,d),null===(n=d.data)||void 0===n?void 0:n.type){case e.EBridgeMessageType.MOUNTED:o.mounted||(o.mounted=!0,o.send({type:e.EBridgeMessageType.INITIALIZE,token:t}));break;case e.EBridgeMessageType.ON_SUCCESS_CTA_CLICKED:document.getElementsByTagName("body")[0].removeChild(g),null==s||s();break;case e.EBridgeMessageType.ON_PAYKEY:null==i||i(d.data);break;case e.EBridgeMessageType.TOKEN:null==l||l()}}))},getIframe:()=>document.getElementById("Straddle-widget-iframe"),show:()=>{o.verbose&&console.log("straddleBridge.show method called.");const e=o.getIframe();o.verbose&&e&&console.log("iframe found, setting display to block."),e.style.display="block"},hide:()=>{o.verbose&&console.log("straddleBridge.hide method called.");const e=o.getIframe();o.verbose&&e&&console.log("iframe found, setting display to none."),e.style.display="none"},remove:()=>{o.verbose&&console.log("straddleBridge.remove method called.");o.getIframe().remove(),o.mounted=!1},send:function(e){var d;const n=document.getElementById("Straddle-widget-iframe");console.log("sending message:",e),null===(d=null==n?void 0:n.contentWindow)||void 0===d||d.postMessage(e,o.origin)}};window.straddleBridge=o,Object.defineProperty(o,"debug",{value:{enable:()=>o.send({type:e.EBridgeMessageType.DEBUG,enable:!0}),disable:()=>o.send({type:e.EBridgeMessageType.DEBUG,enable:!1})},enumerable:!1,writable:!1,configurable:!1})}));
