var StraddleBridgeDemo=function(){"use strict";function e(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var o=function e(){if(this instanceof e){var o=[null];return o.push.apply(o,arguments),new(Function.bind.apply(t,o))}return t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var d=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,d.get?d:{enumerable:!0,get:function(){return e[t]}})})),o}var t;!function(e){e.PING="@straddleio/js-bridge/ping",e.ERROR="@straddleio/js-bridge/error",e.INITIALIZE="@straddleio/js-bridge/initialize",e.INITIALIZING="@straddleio/js-bridge/initializing",e.INITIALIZED="@straddleio/js-bridge/initialized",e.MOUNTED="@straddleio/js-bridge/mounted",e.ON_PAYKEY="@straddleio/js-bridge/on-wallet-token",e.ON_SUCCESS="@straddleio/js-bridge/on-success",e.ON_SUCCESS_CTA_CLICKED="@straddleio/js-bridge/on-success-cta-clicked",e.TOKEN="@straddleio/js-bridge/token",e.DEBUG="@straddleio/js-bridge/debug"}(t||(t={}));var o=e(Object.freeze({__proto__:null,get EBridgeMessageType(){return t}}));const d={getUrl:()=>`${d.origin}/${encodeURIComponent(window.location.origin)}/`,origin:"",mounted:!1,verbose:!1,init:function(e){const{appUrl:t,token:i,onSuccess:n,onSuccessCTAClicked:r,onBridgeToken:s,style:l,verbose:a=!1}=e;d.origin=null!=t?t:"https://dev.straddle.io",a&&console.log("init called");const g=document.createElement("iframe");g.setAttribute("src",d.getUrl()),g.id="Straddle-widget-iframe",Object.assign(g.style,l),document.getElementsByTagName("body")[0].appendChild(g),window.addEventListener("message",(function(e){var t;if(e.origin===d.origin)switch(a&&console.log("Message received from widget:",e.data.type,e),null===(t=e.data)||void 0===t?void 0:t.type){case o.EBridgeMessageType.MOUNTED:d.mounted||(d.mounted=!0,d.send({type:o.EBridgeMessageType.INITIALIZE,token:i}));break;case o.EBridgeMessageType.ON_SUCCESS_CTA_CLICKED:document.getElementsByTagName("body")[0].removeChild(g),null==r||r();break;case o.EBridgeMessageType.ON_PAYKEY:null==n||n(e.data);break;case o.EBridgeMessageType.TOKEN:null==s||s()}}))},getIframe:()=>document.getElementById("Straddle-widget-iframe"),show:()=>{d.verbose&&console.log("straddleBridge.show method called.");const e=d.getIframe();d.verbose&&e&&console.log("iframe found, setting display to block."),e.style.display="block"},hide:()=>{d.verbose&&console.log("straddleBridge.hide method called.");const e=d.getIframe();d.verbose&&e&&console.log("iframe found, setting display to none."),e.style.display="none"},remove:()=>{d.verbose&&console.log("straddleBridge.remove method called."),d.getIframe().remove(),d.mounted=!1},send:function(e){var t;const o=document.getElementById("Straddle-widget-iframe");console.log("sending message:",e),null===(t=null==o?void 0:o.contentWindow)||void 0===t||t.postMessage(e,d.origin)}};return window.straddleBridge=d,Object.defineProperty(d,"debug",{value:{enable:()=>d.send({type:o.EBridgeMessageType.DEBUG,enable:!0}),disable:()=>d.send({type:o.EBridgeMessageType.DEBUG,enable:!1})},enumerable:!1,writable:!1,configurable:!1}),{}}();
