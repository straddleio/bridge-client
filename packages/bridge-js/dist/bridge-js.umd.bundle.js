!function(e,d){"object"==typeof exports&&"undefined"!=typeof module?d(exports):"function"==typeof define&&define.amd?define(["exports"],d):d((e="undefined"!=typeof globalThis?globalThis:e||self).StraddleBridge={})}(this,(function(e){"use strict";var d;!function(e){e.PING="@straddleio/js-bridge/ping",e.ERROR="@straddleio/js-bridge/error",e.INITIALIZE="@straddleio/js-bridge/initialize",e.INITIALIZING="@straddleio/js-bridge/initializing",e.INITIALIZED="@straddleio/js-bridge/initialized",e.MOUNTED="@straddleio/js-bridge/mounted",e.ON_PAYKEY="@straddleio/js-bridge/on-paykey",e.ON_SUCCESS="@straddleio/js-bridge/on-success",e.ON_SUCCESS_CTA_CLICKED="@straddleio/js-bridge/on-success-cta-clicked",e.ON_CLOSE="@straddleio/js-bridge/on-close",e.ON_MANUAL_ENTRY="@straddleio/js-bridge/on-manual-entry",e.ON_RETRY="@straddleio/js-bridge/on-retry",e.TOKEN="@straddleio/js-bridge/token",e.DEBUG="@straddleio/js-bridge/debug",e.CONSOLE="@straddleio/js-bridge/console"}(d||(d={}));const o={getUrl:()=>`${o.origin}/${encodeURIComponent("undefined"!=typeof window&&window.location.origin)}/`,origin:"",mounted:!1,verbose:!1,init:function(e){const{appUrl:t,token:i,onSuccess:n,onSuccessCTAClicked:s,targetRef:l,style:r,className:a,verbose:c=!1}=e;o.origin=null!=t?t:"https://dev.straddle.io",c&&console.log("init called");const g=document.createElement("iframe");g.setAttribute("src",o.getUrl()),g.id="Straddle-widget-iframe";let m=r;r||(m={position:"fixed",width:"100%",height:"100%",top:"0%",left:"0",zIndex:"2147483647"}),Object.assign(g.style,m),a&&a.split(" ").forEach((e=>{g.classList.add(e)})),(l||document.getElementsByTagName("body")[0]).appendChild(g),"undefined"!=typeof window&&window.addEventListener("message",(function(e){var t;if(e.origin===o.origin)switch(c&&console.log("Message received from widget:",e.data.type,e),null===(t=e.data)||void 0===t?void 0:t.type){case d.MOUNTED:o.mounted||(o.mounted=!0,o.send({type:d.INITIALIZE,token:i}));break;case d.ON_SUCCESS_CTA_CLICKED:document.getElementsByTagName("body")[0].removeChild(g),null==s||s();break;case d.ON_PAYKEY:null==n||n(e.data);break;case"@straddleio/bridge-js/console":alert(e.data.method);{const d=e.data.payload.map((e=>{try{return JSON.parse(e)}catch(d){return e}}));console[e.data.method].apply(console,d)}}}))},getIframe:()=>document.getElementById("Straddle-widget-iframe"),show:()=>{o.verbose&&console.log("straddleBridge.show method called.");const e=o.getIframe();o.verbose&&e&&console.log("iframe found, setting display to block."),e.style.display="block"},hide:()=>{o.verbose&&console.log("straddleBridge.hide method called.");const e=o.getIframe();o.verbose&&e&&console.log("iframe found, setting display to none."),e.style.display="none"},remove:()=>{o.verbose&&console.log("straddleBridge.remove method called.");o.getIframe().remove(),o.mounted=!1},send:function(e){var d;const t=document.getElementById("Straddle-widget-iframe");console.log("sending message:",e),null===(d=null==t?void 0:t.contentWindow)||void 0===d||d.postMessage(e,o.origin)}};"undefined"!=typeof window&&(window.straddleBridge=o),Object.defineProperty(o,"debug",{value:{enable:()=>o.send({type:d.DEBUG,enable:!0}),disable:()=>o.send({type:d.DEBUG,enable:!1})},enumerable:!1,writable:!1,configurable:!1}),e.straddleBridge=o}));
//# sourceMappingURL=bridge-js.umd.bundle.js.map
